<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="ajp-button.html">
<link rel="import" href="ajp-image.html">

<dom-module id="ajp-home">

	<template>

		<style include="ajp-button">

			.image-link {
				outline: none;
			}

			.image-link > ajp-image::after {
				display: block;
				content: '';
				position: absolute;
				transition-property: opacity;
				transition-duration: 0s;
				transition-delay: 90ms;
				pointer-events: none;
				opacity: 0;
				top: 5px;
				left: 5px;
				right: 5px;
				bottom: 5px;
				outline: #2196F3 auto 5px;
				outline: -moz-mac-focusring auto 5px;
				outline: -webkit-focus-ring-color auto 5px;
			}

			.image-link:focus > ajp-image::after {
				opacity: 1;
			}

			.item {
				display: block;
				text-decoration: none;
				text-align: center;
				margin-bottom: 40px;
			}

			.item:nth-of-type(1),
			.item:nth-of-type(2),
			.item:nth-of-type(4),
			.item:nth-of-type(5) {
				display: inline-block;
				width: 50%;
			}

			ajp-image {
				position: relative;
				height: 320px;
				overflow: hidden;
				--ajp-image-img: {
					position: absolute;
					top: 0;
					bottom: 0;
					left: -9999px;
					right: -9999px;
					max-width: none;
				};
			}

			h2 {
				font-size: 1.6em;
				font-weight: 500;
				margin: 32px 0;
			}

			.item:nth-of-type(1) > h2,
			.item:nth-of-type(2) > h2,
			.item:nth-of-type(4) > h2,
			.item:nth-of-type(5) > h2 {
				font-size: 1.4em;
			}

			@media (max-width: 767px) {
				ajp-image {
					height: 240px;
				}

				h2 {
					margin: 24px 0;
				}

				.item:nth-of-type(1) > ajp-button > a,
				.item:nth-of-type(2) > ajp-button > a,
				.item:nth-of-type(4) > ajp-button > a,
				.item:nth-of-type(5) > ajp-button > a {
					padding: 8px 24px;
				}
			}

		</style>
		<header class="header-aboutme">
				<h1>[[category.title]]</h1>
				<span></span>
			</header>

		<template is="dom-repeat" items="[[categories]]" strip-whitespace>
			<div class="item">
				<a class="image-link" href$="[[item.route]]/[[item.name]]">
					<ajp-image src="[[item.image]]" alt="[[item.title]]" placeholder-img="[[item.placeholder]]"></ajp-image>
				</a>
				<h2>[[item.title]]</h2>
				<ajp-button>
					<a aria-label$="[[item.title]]" href$="[[item.route]]/[[item.name]]">Enter</a>
				</ajp-button>
			</div>
		</template>

	</template>

	<script>

		Polymer({

			is: 'ajp-home',

			properties: {

				categories: {
					type: Array
				},

				visible: {
					type: Boolean,
					observer: '_visibleChanged'
				}

			},

			_visibleChanged: function(visible) {
				if (visible) {
					this.fire('change-section', { title: 'Home' });
				}
			}

		});

	</script>

</dom-module>
