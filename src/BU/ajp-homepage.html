<!-- @license Copyright (c) 2016 The Polymer Project Authors. All rights reserved. This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as part of the polymer project is also subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt -->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="ajp-category-data.html">
<link rel="import" href="ajp-common-styles.html">
<link rel="import" href="ajp-form-styles.html">
<link rel="import" href="ajp-image.html">

<dom-module id="ajp-homepage">

	<template>

		<style include="ajp-common-styles ajp-form-styles">

			.hero-image {
				position: relative;
				height: 320px;
				overflow: hidden;
				margin-bottom: 32px;
			}

			.hero-image {
				--ajp-image-img: {
					position: absolute;
					top: 0;
					bottom: 0;
					left: -9999px;
					right: -9999px;
					max-width: none;
				};
			}

			.grid {
				@apply(--layout-horizontal);
				@apply(--layout-wrap);
				@apply(--layout-justified);
				margin: 0 10px 32px 10px;
			}

			.grid > a {
				-webkit-flex: 1 1;
				flex: 1 1;
				-webkit-flex-basis: 33%;
				flex-basis: 33%;
				max-width: 33%;
				text-decoration: none;
			}

			@media (max-width: 767px) {
				.hero-image {
					display: none;
				}

				.grid > a {
					-webkit-flex-basis: 50%;
					flex-basis: 50%;
					max-width: 50%;
				}
			}

		</style>

		<!--
			app-route provides the name of the category.
		-->
		<app-route
				route="[[route]]"
				pattern="/:category"
				data="{{routeData}}"></app-route>

		<!--
			ajp-category-data provides the category data for a given category name.
		-->
		<ajp-category-data
				id="categoryData"
				category-name="[[routeData.category]]"
				category="{{category}}"
				failure="{{failure}}"></ajp-category-data>

		<ajp-image
				alt="[[category.title]]"
				src="[[category.image]]"
				placeholder-img="[[category.placeholder]]" class="hero-image"></ajp-image>

		<header>
			<h1>[[category.title]]</h1>
			<span>Welcome to My Website<br>Here are places you can go:</span>
			<p>
				<template is="dom-repeat" items="[[categories]]" as="category" initial-count="4">
					<a name="[[category.name]]" href="[[category.route]]/[[category.name]]">[[category.title]]</a>
				</template>
			</p>
		</header>

		<div class="main-frame">

		</div>







klksjf;lkasj;flkasjdf;lkjasd;4flkjasd;4flk=j














		<!--
			ajp-network-warning shows a warning message when the items can't be rendered due
			to network conditions.
		-->
		<ajp-network-warning
				hidden$="[[!failure]]"
				offline="[[offline]]"
				on-try-reconnect="_tryReconnect"></ajp-network-warning>

	</template>

	<script>

		Polymer({
			is: 'ajp-homepage',

			properties: {
				category: Object,
				route: Object,
				routeData: Object,
				visible: Boolean,

				offline: {
					type: Boolean,
					observer: '_offlineChanged'
				},

				failure: Boolean
			},

			observers: [
				'_categoryChanged(category, visible)'
			],

			_categoryChanged: function(category, visible) {
				if (visible) {
					this.debounce('change-section', function() {
						// Notify the category and the page's title
						this.fire('change-section', {
							category: category.name,
							title: category.title
						});
					});
				}
			},

			_tryReconnect: function() {
				this.$.categoryData.refresh();
			},

			_offlineChanged: function(offline) {
				if (!offline) {
					this._tryReconnect();
				}
			}

		});

	</script>

</dom-module>
